:root {
    --ocean-deep: #0a192f;
    --neon-blue: #00d4ff;
    --neon-orange: #ff9d00;
    --pearl-white: #e0f7fa;
    --glass-bg: rgba(255, 255, 255, 0.1);
    
    /* --- НАЛАШТУВАННЯ АБАКУСА --- */
    /* Базові розміри, які ми будемо змінювати для мобільних */
    --bead-width: 40px;
    --bead-height: 30px;
    --col-width: 40px;
    --col-height: 280px;
    --shift-upper: 35px;  /* На скільки зсувається верхня кісточка */
    --shift-lower: -45px; /* На скільки зсувається нижня кісточка */
    --col-gap: 15px;      /* Відстань між колонками */
}

body.neuro-ocean {
    background: radial-gradient(circle at center, #112240 0%, #0a192f 100%);
    color: white;
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    /* Забороняємо подвійний тап для зуму на всьому екрані */
    touch-action: manipulation; 
    overflow-x: hidden;
}

.mobile-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 10px;
    min-height: 100vh;
}

/* --- КОМПАКТНИЙ ХЕДЕР --- */
header .header-content {
    display: flex;
    justify-content: space-between; /* Розносимо лого і ранг по краях */
    align-items: center;
    padding: 10px 15px;
    border-bottom: 1px solid var(--neon-blue);
    width: 100%;
    box-sizing: border-box;
}

.logo { font-size: 1.2rem; }
.stats { text-align: right; font-size: 0.85rem; }

/* --- МІСІЯ (ПАНЕЛЬ КЕРУВАННЯ) --- */
.daily-mission {
    width: 100%;
    display: flex;
    justify-content: center;
    margin: 10px 0;
}

.mission-box {
    background: rgba(10, 25, 47, 0.85);
    backdrop-filter: blur(10px);
    border: 1px solid var(--neon-blue);
    border-radius: 15px;
    padding: 15px;
    text-align: center;
    width: 95%;
    max-width: 400px;
    box-shadow: 0 0 15px rgba(0, 212, 255, 0.1);
}

.mission-control h1 {
    font-size: 1.5rem;
    margin: 10px 0;
    display: none; /* Ховаємо заголовок на мобільних, щоб звільнити місце */
}

.target-display {
    font-size: 1.8rem; /* Збільшуємо ціль */
    font-weight: bold;
    color: var(--pearl-white);
    text-shadow: 0 0 10px var(--neon-blue);
    margin: 5px 0;
}

/* --- АБАКУС (ГОЛОВНИЙ ЕЛЕМЕНТ) --- */
.abacus-system {
    flex-grow: 1; /* Займає вільне місце */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
}

.abacus-frame {
    background: rgba(0,0,0,0.6);
    padding: 15px 5px;
    border: 3px solid #5d4037;
    border-radius: 12px;
    width: 95vw;
    max-width: 600px;
    
    /* Дозволяємо горизонтальний скрол, якщо пальці завеликі */
    overflow-x: auto; 
    display: flex;
    justify-content: center; /* Центруємо вміст */
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.abacus {
    display: flex;
    gap: var(--col-gap);
    padding: 0 10px; /* Відступи всередині рамки */
}

.column {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    width: var(--col-width);
    height: var(--col-height);
    flex-shrink: 0; /* Забороняємо стискання колонок */
}

/* Спиця */
.column::before {
    content: "";
    position: absolute;
    height: 100%;
    width: 4px;
    background: #bdc3c7;
    z-index: 0;
    background: linear-gradient(to bottom, transparent, var(--neon-blue), transparent);
    box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
}

/* Перекладина */
.column::after {
    content: "";
    position: absolute;
    top: calc(var(--col-height) * 0.25); /* Позиція перекладини ~70px */
    width: calc(var(--col-width) + 10px);
    height: 8px;
    background: #5d4037;
    z-index: 1;
    border-radius: 2px;
}

.bead {
    width: var(--bead-width);
    height: var(--bead-height);
    background: radial-gradient(circle at 30% 30%, #444, #111);
    border-radius: 50%; /* Робимо більш округлими */
    cursor: pointer;
    z-index: 2;
    transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Пружний ефект */
    /* Збільшуємо зону кліку прозорим бордером, якщо треба */
    position: relative;
}

.bead.active {
    background: radial-gradient(circle at 30% 30%, #fff, var(--neon-orange));
    box-shadow: 0 0 15px var(--neon-orange);
}

/* Верхня частина */
.upper { 
    height: calc(var(--col-height) * 0.25); 
    display: flex; 
    align-items: flex-start; 
}
.upper .bead.active { 
    transform: translateY(var(--shift-upper)); 
}

/* Нижня частина */
.lower { 
    height: calc(var(--col-height) * 0.70); 
    display: flex; 
    flex-direction: column; 
    justify-content: flex-end; 
    gap: 2px;
}
.lower .bead.active { 
    transform: translateY(var(--shift-lower)); 
}

/* Енерго-панель */
.energy-panel {
    margin-top: 15px;
    padding: 5px 30px;
    border-radius: 30px;
    background: var(--glass-bg);
    border: 1px solid var(--neon-orange);
}
.neuro-value { font-size: 32px; color: var(--neon-orange); font-weight: bold; }

/* Кнопки */
.controls-panel {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-top: 15px;
}
.mission-btn, .reset-btn {
    padding: 12px;
    font-size: 1rem;
    border-radius: 8px;
    text-transform: uppercase;
    font-weight: bold;
    border: none;
}
.mission-btn { background: var(--neon-blue); color: var(--ocean-deep); box-shadow: 0 0 10px rgba(0,212,255,0.3); }
.reset-btn { background: rgba(255, 62, 62, 0.2); color: #ff3e3e; border: 1px solid #ff3e3e; }

/* --- МОБІЛЬНА АДАПТАЦІЯ --- */
@media (max-width: 480px) {
    :root {
        /* Трохи зменшуємо абакус, щоб влізло 7 колонок, або скролимо */
        --bead-width: 34px;     
        --bead-height: 26px;
        --col-width: 34px;
        --col-height: 240px;
        --shift-upper: 30px;
        --shift-lower: -38px;
        --col-gap: 8px;
    }

    .abacus-frame {
        width: 98vw; /* Максимальна ширина */
        justify-content: flex-start; /* Вирівнювання ліворуч для скролу */
        overflow-x: auto; /* Вмикаємо скрол, якщо не влізає */
        padding-left: 10px; /* Відступ для естетики */
    }
	.bead.active {
        /* Менша тінь для швидкодії */
        box-shadow: 0 0 5px var(--neon-orange); 
    }
    /* Ховаємо логотип на дуже малих екранах, залишаємо тільки "NEURO" */
    .logo span { display: inline-block; }
    
    .mission-box { padding: 10px; }
    .target-display { font-size: 1.5rem; }
    .status-text { display: none; } /* Прибираємо зайвий текст */
}

/* Анімації та інші ефекти залишаємо з оригіналу */
@keyframes energy-pulse {
    0% { transform: scale(1) translateY(var(--move-y)); box-shadow: 0 0 15px var(--neon-orange); }
    50% { transform: scale(1.1) translateY(var(--move-y)); box-shadow: 0 0 25px var(--neon-blue); }
    100% { transform: scale(1) translateY(var(--move-y)); box-shadow: 0 0 15px var(--neon-orange); }
}

.upper .bead.active { --move-y: var(--shift-upper); animation: energy-pulse 3s infinite; }
.lower .bead.active { --move-y: var(--shift-lower); animation: energy-pulse 3s infinite; }

/* Інші допоміжні стилі (pearl, bubbles) залишаємо без змін */
.hidden { display: none; }
.pearl-container { height: 80px; display: flex; justify-content: center; align-items: center; }
.pearl { width: 50px; height: 50px; background: radial-gradient(circle at 30% 30%, #fff, #80deea); border-radius: 50%; animation: pearl-float 3s infinite; }
.pearl-flash { position: absolute; width: 80px; height: 80px; background: white; border-radius: 50%; filter: blur(20px); opacity: 0; }
.animate-flash { animation: flash-burst 0.8s ease-out; }
@keyframes flash-burst { 0% { transform: scale(0); opacity: 1; } 100% { transform: scale(6); opacity: 0; } }
@keyframes pearl-float { 50% { transform: translateY(-10px); } }